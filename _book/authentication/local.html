<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Local (username &amp; password) | Feathers</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="../styles/website.css">
    

        
    
    
    <link rel="next" href="../authentication/token.html" />
    
    
    <link rel="prev" href="../authentication/readme.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="10.1"
        data-chapter-title="Local (username &amp; password)"
        data-filepath="authentication/local.md"
        data-basepath=".."
        data-revision="Mon Feb 15 2016 22:58:02 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="getting-started/readme.html">
            
                
                    <a href="../getting-started/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Getting Started
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="getting-started/quick-start.html">
            
                
                    <a href="../getting-started/quick-start.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Quick Start
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="getting-started/your-first-app/readme.html">
            
                
                    <a href="../getting-started/your-first-app/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Your First App
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="why/readme.html">
            
                
                    <a href="../why/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Why Feathers
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="why/philosophy.html">
            
                
                    <a href="../why/philosophy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Philosophy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="why/vs/readme.html">
            
                
                    <a href="../why/vs/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Features
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="why/vs/express-socketio.html">
            
                
                    <a href="../why/vs/express-socketio.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Feathers vs Express + Socket.io
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="why/vs/meteor.html">
            
                
                    <a href="../why/vs/meteor.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Feathers vs Meteor
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="why/vs/sails.html">
            
                
                    <a href="../why/vs/sails.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        Feathers vs Sails
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="why/vs/firebase.html">
            
                
                    <a href="../why/vs/firebase.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        Feathers vs Firebase
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="why/vs/parse.html">
            
                
                    <a href="../why/vs/parse.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        Feathers vs Parse
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="services/readme.html">
            
                
                    <a href="../services/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Services
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="rest/readme.html">
            
                
                    <a href="../rest/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        REST
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="real-time/readme.html">
            
                
                    <a href="../real-time/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Real-Time
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="real-time/events.html">
            
                
                    <a href="../real-time/events.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Service events
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="real-time/socket-io.html">
            
                
                    <a href="../real-time/socket-io.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Socket.io
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="real-time/primus.html">
            
                
                    <a href="../real-time/primus.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Primus
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="real-time/filtering.html">
            
                
                    <a href="../real-time/filtering.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Event Filtering
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="databases/readme.html">
            
                
                    <a href="../databases/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Databases
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="databases/pagination.html">
            
                
                    <a href="../databases/pagination.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Pagination and sorting
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="databases/querying.html">
            
                
                    <a href="../databases/querying.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Querying
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="databases/extending.html">
            
                
                    <a href="../databases/extending.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Extending adapters
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="databases/memory.html">
            
                
                    <a href="../databases/memory.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        In Memory
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="databases/nedb.html">
            
                
                    <a href="../databases/nedb.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.5.</b>
                        
                        NeDB
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="databases/mongoose.html">
            
                
                    <a href="../databases/mongoose.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.6.</b>
                        
                        Mongoose
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="databases/sequelize.html">
            
                
                    <a href="../databases/sequelize.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.7.</b>
                        
                        Sequelize
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="databases/knexjs.html">
            
                
                    <a href="../databases/knexjs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.8.</b>
                        
                        KnexJS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.9" data-path="databases/waterline.html">
            
                
                    <a href="../databases/waterline.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.9.</b>
                        
                        Waterline
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="hooks/readme.html">
            
                
                    <a href="../hooks/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Hooks
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="hooks/usage.html">
            
                
                    <a href="../hooks/usage.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Usage
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="hooks/examples.html">
            
                
                    <a href="../hooks/examples.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        Examples
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="hooks/bundled.html">
            
                
                    <a href="../hooks/bundled.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                        Built-in hooks
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="clients/readme.html">
            
                
                    <a href="../clients/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Client Use
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="clients/feathers.html">
            
                
                    <a href="../clients/feathers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        Universal Feathers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="clients/rest.html">
            
                
                    <a href="../clients/rest.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        REST
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="clients/socket-io.html">
            
                
                    <a href="../clients/socket-io.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                        Socket.io
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="clients/primus.html">
            
                
                    <a href="../clients/primus.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                        Primus
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="middleware/readme.html">
            
                
                    <a href="../middleware/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Middleware
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="middleware/express.html">
            
                
                    <a href="../middleware/express.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Express Middleware
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="middleware/routing.html">
            
                
                    <a href="../middleware/routing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Routing and Versioning
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="authentication/readme.html">
            
                
                    <a href="../authentication/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Authentication
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="10.1" data-path="authentication/local.html">
            
                
                    <a href="../authentication/local.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                        Local (username &amp; password)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="authentication/token.html">
            
                
                    <a href="../authentication/token.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                        Token (JWT)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="authentication/oauth1.html">
            
                
                    <a href="../authentication/oauth1.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.3.</b>
                        
                        Oauth1 (Twitter, etc)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.4" data-path="authenication/oauth2.html">
            
            <span><b>10.4.</b> OAuth2 (Facebook, etc)</span>
            
            
        </li>
    
        <li class="chapter " data-level="10.5" data-path="authentication/two-factor.html">
            
                
                    <a href="../authentication/two-factor.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.5.</b>
                        
                        Two Factor
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.6" data-path="authentication/authorization.html">
            
                
                    <a href="../authentication/authorization.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.6.</b>
                        
                        Authorization / Access Control
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.7" data-path="authentication/bundled-hooks.html">
            
                
                    <a href="../authentication/bundled-hooks.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.7.</b>
                        
                        Bundled Auth Hooks
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="11" data-path="hooks/authorization.html">
            
            <span><b>11.</b> Authorization</span>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="middleware/error-handling.html">
            
                
                    <a href="../middleware/error-handling.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        Error Handling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="middleware/logging.html">
            
                
                    <a href="../middleware/logging.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        Logging
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="api/readme.html">
            
                
                    <a href="../api/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        Core API
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="guides/readme.html">
            
                
                    <a href="../guides/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        Guides
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="15.1" data-path="guides/migrating.html">
            
                
                    <a href="../guides/migrating.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.1.</b>
                        
                        Migrating to Feathers 2
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15.2" >
            
            <span><b>15.2.</b> Creating a plugin</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.3" >
            
            <span><b>15.3.</b> React</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.4" >
            
            <span><b>15.4.</b> React Native</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.5" >
            
            <span><b>15.5.</b> jQuery</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.6" >
            
            <span><b>15.6.</b> CanJS</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.7" >
            
            <span><b>15.7.</b> Angular</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.8" >
            
            <span><b>15.8.</b> VueJS</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.9" >
            
            <span><b>15.9.</b> iOS</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.10" >
            
            <span><b>15.10.</b> Android</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="16" data-path="help/readme.html">
            
                
                    <a href="../help/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        Help
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="16.1" data-path="help/faq.html">
            
                
                    <a href="../help/faq.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.1.</b>
                        
                        FAQ
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.2" data-path="contributing.html">
            
                
                    <a href="../contributing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.2.</b>
                        
                        Contributing
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.3" data-path="changelog.html">
            
                
                    <a href="../changelog.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.3.</b>
                        
                        Changelog
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="17" data-path="license.html">
            
                
                    <a href="../license.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        License
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Feathers</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="setting-up-local-auth">Setting up Local Auth</h1>
<p>A <code>local</code> auth strategy authenticates users against users in the local database. The <a href="https://github.com/feathersjs/feathers-authentication" target="_blank">feathers-authentication</a> plugin makes it easy to add local auth to your app.</p>
<p>If you already have an app started, you can simply add the following lines to your server setup.  Just make sure you have used the <code>bodyParser</code> and, if applicable, <code>cors</code> plugins before you use the <code>feathers-authentication</code> plugin.</p>
<pre><code class="lang-js">app.configure(feathersAuth({
  secret: <span class="hljs-string">&apos;your-feathers-auth-secret&apos;</span>
}));
</code></pre>
<p>See the <a href="https://github.com/feathersjs/feathers-authentication#options" target="_blank">feathers-authentication api options</a> for all available configuration options.</p>
<h2 id="getting-started-tutorial">Getting Started Tutorial</h2>
<p>Here&apos;s an example server that uses the <a href="https://github.com/feathersjs/feathers-mongoose" target="_blank">feathers-mongoose</a> database adapter.  You can use the following examples to get an idea of how it works.</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> feathers <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;feathers&apos;</span>;
<span class="hljs-keyword">import</span> hooks <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;feathers-hooks&apos;</span>;
<span class="hljs-keyword">import</span> bodyParser <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;body-parser&apos;</span>;
<span class="hljs-keyword">import</span> authentication <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;feathers-authentication&apos;</span>;
<span class="hljs-keyword">import</span> { hooks <span class="hljs-keyword">as</span> authHooks } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;feathers-authentication&apos;</span>;
<span class="hljs-keyword">import</span> mongoose <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;mongoose&apos;</span>;
<span class="hljs-keyword">import</span> service <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;feathers-mongoose&apos;</span>;

<span class="hljs-keyword">const</span> port = <span class="hljs-number">3030</span>;
<span class="hljs-keyword">const</span> Schema = mongoose.Schema;
<span class="hljs-keyword">const</span> UserSchema = <span class="hljs-keyword">new</span> Schema({
  username: {type: <span class="hljs-built_in">String</span>, required: <span class="hljs-literal">true</span>, unique: <span class="hljs-literal">true</span>},
  password: {type: <span class="hljs-built_in">String</span>, required: <span class="hljs-literal">true</span> },
  createdAt: {type: <span class="hljs-built_in">Date</span>, <span class="hljs-string">&apos;default&apos;</span>: <span class="hljs-built_in">Date</span>.now},
  updatedAt: {type: <span class="hljs-built_in">Date</span>, <span class="hljs-string">&apos;default&apos;</span>: <span class="hljs-built_in">Date</span>.now}
});
<span class="hljs-keyword">let</span> UserModel = mongoose.model(<span class="hljs-string">&apos;User&apos;</span>, UserSchema);

mongoose.Promise = global.Promise;
mongoose.connect(<span class="hljs-string">&apos;mongodb://localhost:27017/feathers&apos;</span>);

<span class="hljs-comment">/* * * Initialize the App and Plugins * * */</span>
<span class="hljs-keyword">let</span> app = feathers()
  .configure(feathers.rest())
  .configure(feathers.socketio())
  .configure(hooks())
  .use(bodyParser.json())
  .use(bodyParser.urlencoded({ extended: <span class="hljs-literal">true</span> }))
  <span class="hljs-comment">// Configure feathers-authentication</span>
  .configure(authentication({
    secret: <span class="hljs-string">&apos;feathers-rocks&apos;</span>
  }));

app.use(<span class="hljs-string">&apos;/users&apos;</span>, <span class="hljs-keyword">new</span> service(<span class="hljs-string">&apos;user&apos;</span>, {Model: UserModel}))

<span class="hljs-keyword">let</span> userService = app.service(<span class="hljs-string">&apos;/users&apos;</span>);
userService.before({
  create: [authHooks.hashPassword(<span class="hljs-string">&apos;password&apos;</span>)]
});

<span class="hljs-keyword">let</span> server = app.listen(port);
server.on(<span class="hljs-string">&apos;listening&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Feathers application started on localhost:<span class="hljs-subst">${port}</span>`</span>);
});
</code></pre>
<p>Please note that the above User service does not include any kind of authorization or access control.  That will require setting up additional hooks, later.  For now, leaving out the access control will allow us to easily create a user.  Here&apos;s an example request to create a user (make sure your server is running):</p>
<pre><code class="lang-js"><span class="hljs-comment">// Create User (POST http://localhost:3030/api/users)</span>
jQuery.ajax({
  url: <span class="hljs-string">&apos;http://localhost:3030/api/users&apos;</span>,
  type: <span class="hljs-string">&apos;POST&apos;</span>,
  headers: {
    <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/json&apos;</span>,
  },
  contentType: <span class="hljs-string">&apos;application/json&apos;</span>,
  data: <span class="hljs-built_in">JSON</span>.stringify({
    <span class="hljs-string">&apos;username&apos;</span>: <span class="hljs-string">&apos;feathersuser&apos;</span>,
    <span class="hljs-string">&apos;password&apos;</span>: <span class="hljs-string">&apos;fowlplay&apos;</span>
  })
})
.done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, textStatus, jqXHR</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;HTTP Request Succeeded: &apos;</span> + jqXHR.status);
    <span class="hljs-built_in">console</span>.log(data);
})
.fail(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">jqXHR, textStatus, errorThrown</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;HTTP Request Failed&apos;</span>, <span class="hljs-built_in">arguments</span>);
});
</code></pre>
<p>Once you&apos;ve created a user, logging in is as simple as <code>POST</code>ing a request to the <code>loginEndpoint</code>, which is <code>/api/login</code> by default.  Here&apos;s an example request for logging in:</p>
<pre><code class="lang-js"><span class="hljs-comment">// Login by email (POST http://localhost:3030/api/login)</span>
jQuery.ajax({
  url: <span class="hljs-string">&apos;http://localhost:3030/api/login&apos;</span>,
  type: <span class="hljs-string">&apos;POST&apos;</span>,
  headers: {
    <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/json&apos;</span>,
  },
  contentType: <span class="hljs-string">&apos;application/json&apos;</span>,
  data: <span class="hljs-built_in">JSON</span>.stringify({
    <span class="hljs-string">&apos;username&apos;</span>: <span class="hljs-string">&apos;feathersuser&apos;</span>,
    <span class="hljs-string">&apos;password&apos;</span>: <span class="hljs-string">&apos;fowlplay&apos;</span>
  })
})
.done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, textStatus, jqXHR</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;HTTP Request Succeeded: &apos;</span> + jqXHR.status);
  <span class="hljs-built_in">console</span>.log(data);
})
.fail(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">jqXHR, textStatus, errorThrown</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;HTTP Request Failed&apos;</span>, <span class="hljs-built_in">arguments</span>);
});
</code></pre>
<p>The server will respond with an object that contains two properties, <code>user</code> and <code>token</code>.  The <code>user</code> property contains an object with whatever data was returned from your user service.  You&apos;ll notice that it currently includes the password.  You really don&apos;t want it exposed, so when you&apos;re ready to secure the service, you&apos;ll need an additional feathers-hook to remove the password property from the response. </p>
<p>The <code>token</code> property contains a JWT token that you can use to authenticate REST requests or for socket connections.  You can learn more about how JWT tokens work on <a href="http://jwt.io/" target="_blank">jwt.io</a>.</p>
<h3 id="authenticating-rest-requests">Authenticating REST Requests</h3>
<p>Authenticated REST requests must have an <code>Authorization</code> header in the format <code>&apos;Bearer &lt;token&gt;&apos;</code>, where the <token> is the JWT token. The header should have the following format:</token></p>
<pre><code>Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IklseWEgRmFkZWV2IiwiYWRtaW4iOnRydWV9.YiG9JdVVm6Pvpqj8jDT5bMxsm0gwoQTOaZOLI-QfSNc
</code></pre><p>Assuming you&apos;ve set up a todos service, here is full request example you can try out. Be sure to replace <code>&lt;token&gt;</code> with a token you&apos;ve retrieved from your <code>loginEndpoint</code>:</p>
<pre><code class="lang-js"><span class="hljs-comment">// List Todos (GET http://localhost:3030/api/todos)</span>
jQuery.ajax({
  url: <span class="hljs-string">&apos;http://localhost:3030/api/todos&apos;</span>,
  type: <span class="hljs-string">&apos;GET&apos;</span>,
  headers: {
    <span class="hljs-string">&quot;Authorization&quot;</span>: <span class="hljs-string">&quot;Bearer &lt;token&gt;&quot;</span>,
    <span class="hljs-string">&quot;Accept&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>,
  },
})
.done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, textStatus, jqXHR</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;HTTP Request Succeeded: &quot;</span> + jqXHR.status);
    <span class="hljs-built_in">console</span>.log(data);
})
.fail(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">jqXHR, textStatus, errorThrown</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;HTTP Request Failed&quot;</span>, <span class="hljs-built_in">arguments</span>);
});
</code></pre>
<h3 id="authenticating-socketio-connections">Authenticating Socket.io Connections</h3>
<p>In order to authenticate a Websocket connection, you must first obtain a token using an Ajax request to your <code>loginEndpoint</code>.  You then include that token in the request.  The example below is for Socket.io, but the same <code>query</code> key can be passed to Primus.</p>
<pre><code class="lang-js">socket = io(<span class="hljs-string">&apos;&apos;</span>, {
  <span class="hljs-comment">// Assuming you&apos;ve already saved a token to localStorage.</span>
  query: <span class="hljs-string">&apos;token=&apos;</span> + localStorage.getItem(<span class="hljs-string">&apos;featherstoken&apos;</span>),
  transports: [<span class="hljs-string">&apos;websocket&apos;</span>], <span class="hljs-comment">// optional, see below</span>
  forceNew:<span class="hljs-literal">true</span>,             <span class="hljs-comment">// optional, see below</span>
});
</code></pre>
<p>In the above example, the <code>transports</code> key is only needed if you, for some reason, need to force the browser to only use websockets.  The <code>forceNew</code> key is only needed if you have previously connected an <em>unauthenticated</em> Websocket connection and you now want to start an <em>authenticated</em> request.</p>
<h3 id="whats-next">What&apos;s next?</h3>
<p>Adding authentication allows you to know <strong>who</strong> users are. Now you&apos;ll want to specify <strong>what</strong> they can do. This is done using authorization hooks. Learn more about it in the <a href="authorization.html">Authorization section</a>.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../authentication/readme.html" class="navigation navigation-prev " aria-label="Previous page: Authentication"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../authentication/token.html" class="navigation navigation-next " aria-label="Next page: Token (JWT)"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-collapsible-menu/plugin.js"></script>
    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.2.1/anchor.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-heading-anchors/anchor-style.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"edit-link":{"base":"https://github.com/feathersjs/feathers-docs/edit/master","label":"Edit This Page"},"collapsible-menu":{},"heading-anchors":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"livereload":{}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
