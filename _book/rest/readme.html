<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>REST | Feathers</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="../styles/website.css">
    

        
    
    
    <link rel="next" href="../real-time/readme.html" />
    
    
    <link rel="prev" href="../services/readme.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="4"
        data-chapter-title="REST"
        data-filepath="rest/readme.md"
        data-basepath=".."
        data-revision="Mon Feb 15 2016 22:58:02 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="getting-started/readme.html">
            
                
                    <a href="../getting-started/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Getting Started
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="getting-started/quick-start.html">
            
                
                    <a href="../getting-started/quick-start.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Quick Start
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="getting-started/your-first-app/readme.html">
            
                
                    <a href="../getting-started/your-first-app/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Your First App
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="why/readme.html">
            
                
                    <a href="../why/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Why Feathers
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="why/philosophy.html">
            
                
                    <a href="../why/philosophy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Philosophy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="why/vs/readme.html">
            
                
                    <a href="../why/vs/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Features
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="why/vs/express-socketio.html">
            
                
                    <a href="../why/vs/express-socketio.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Feathers vs Express + Socket.io
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="why/vs/meteor.html">
            
                
                    <a href="../why/vs/meteor.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Feathers vs Meteor
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="why/vs/sails.html">
            
                
                    <a href="../why/vs/sails.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        Feathers vs Sails
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="why/vs/firebase.html">
            
                
                    <a href="../why/vs/firebase.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        Feathers vs Firebase
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="why/vs/parse.html">
            
                
                    <a href="../why/vs/parse.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        Feathers vs Parse
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="services/readme.html">
            
                
                    <a href="../services/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Services
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="4" data-path="rest/readme.html">
            
                
                    <a href="../rest/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        REST
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="real-time/readme.html">
            
                
                    <a href="../real-time/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Real-Time
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="real-time/events.html">
            
                
                    <a href="../real-time/events.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Service events
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="real-time/socket-io.html">
            
                
                    <a href="../real-time/socket-io.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Socket.io
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="real-time/primus.html">
            
                
                    <a href="../real-time/primus.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Primus
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="real-time/filtering.html">
            
                
                    <a href="../real-time/filtering.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Event Filtering
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="databases/readme.html">
            
                
                    <a href="../databases/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Databases
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="databases/pagination.html">
            
                
                    <a href="../databases/pagination.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Pagination and sorting
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="databases/querying.html">
            
                
                    <a href="../databases/querying.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Querying
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="databases/extending.html">
            
                
                    <a href="../databases/extending.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Extending adapters
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="databases/memory.html">
            
                
                    <a href="../databases/memory.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        In Memory
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="databases/nedb.html">
            
                
                    <a href="../databases/nedb.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.5.</b>
                        
                        NeDB
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="databases/mongoose.html">
            
                
                    <a href="../databases/mongoose.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.6.</b>
                        
                        Mongoose
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="databases/sequelize.html">
            
                
                    <a href="../databases/sequelize.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.7.</b>
                        
                        Sequelize
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="databases/knexjs.html">
            
                
                    <a href="../databases/knexjs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.8.</b>
                        
                        KnexJS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.9" data-path="databases/waterline.html">
            
                
                    <a href="../databases/waterline.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.9.</b>
                        
                        Waterline
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="hooks/readme.html">
            
                
                    <a href="../hooks/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Hooks
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="hooks/usage.html">
            
                
                    <a href="../hooks/usage.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Usage
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="hooks/examples.html">
            
                
                    <a href="../hooks/examples.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        Examples
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="hooks/bundled.html">
            
                
                    <a href="../hooks/bundled.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                        Built-in hooks
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="clients/readme.html">
            
                
                    <a href="../clients/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Client Use
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="clients/feathers.html">
            
                
                    <a href="../clients/feathers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        Universal Feathers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="clients/rest.html">
            
                
                    <a href="../clients/rest.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        REST
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="clients/socket-io.html">
            
                
                    <a href="../clients/socket-io.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                        Socket.io
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="clients/primus.html">
            
                
                    <a href="../clients/primus.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                        Primus
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="middleware/readme.html">
            
                
                    <a href="../middleware/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Middleware
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="middleware/express.html">
            
                
                    <a href="../middleware/express.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Express Middleware
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="middleware/routing.html">
            
                
                    <a href="../middleware/routing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Routing and Versioning
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="authentication/readme.html">
            
                
                    <a href="../authentication/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Authentication
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1" data-path="authentication/local.html">
            
                
                    <a href="../authentication/local.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                        Local (username &amp; password)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="authentication/token.html">
            
                
                    <a href="../authentication/token.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                        Token (JWT)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="authentication/oauth1.html">
            
                
                    <a href="../authentication/oauth1.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.3.</b>
                        
                        Oauth1 (Twitter, etc)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.4" data-path="authenication/oauth2.html">
            
            <span><b>10.4.</b> OAuth2 (Facebook, etc)</span>
            
            
        </li>
    
        <li class="chapter " data-level="10.5" data-path="authentication/two-factor.html">
            
                
                    <a href="../authentication/two-factor.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.5.</b>
                        
                        Two Factor
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.6" data-path="authentication/authorization.html">
            
                
                    <a href="../authentication/authorization.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.6.</b>
                        
                        Authorization / Access Control
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.7" data-path="authentication/bundled-hooks.html">
            
                
                    <a href="../authentication/bundled-hooks.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.7.</b>
                        
                        Bundled Auth Hooks
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="11" data-path="hooks/authorization.html">
            
            <span><b>11.</b> Authorization</span>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="middleware/error-handling.html">
            
                
                    <a href="../middleware/error-handling.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        Error Handling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="middleware/logging.html">
            
                
                    <a href="../middleware/logging.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        Logging
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="api/readme.html">
            
                
                    <a href="../api/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        Core API
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="guides/readme.html">
            
                
                    <a href="../guides/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        Guides
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="15.1" data-path="guides/migrating.html">
            
                
                    <a href="../guides/migrating.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.1.</b>
                        
                        Migrating to Feathers 2
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15.2" >
            
            <span><b>15.2.</b> Creating a plugin</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.3" >
            
            <span><b>15.3.</b> React</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.4" >
            
            <span><b>15.4.</b> React Native</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.5" >
            
            <span><b>15.5.</b> jQuery</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.6" >
            
            <span><b>15.6.</b> CanJS</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.7" >
            
            <span><b>15.7.</b> Angular</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.8" >
            
            <span><b>15.8.</b> VueJS</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.9" >
            
            <span><b>15.9.</b> iOS</span>
            
            
        </li>
    
        <li class="chapter " data-level="15.10" >
            
            <span><b>15.10.</b> Android</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="16" data-path="help/readme.html">
            
                
                    <a href="../help/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        Help
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="16.1" data-path="help/faq.html">
            
                
                    <a href="../help/faq.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.1.</b>
                        
                        FAQ
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.2" data-path="contributing.html">
            
                
                    <a href="../contributing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.2.</b>
                        
                        Contributing
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.3" data-path="changelog.html">
            
                
                    <a href="../changelog.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.3.</b>
                        
                        Changelog
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="17" data-path="license.html">
            
                
                    <a href="../license.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        License
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Feathers</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="the-rest-api-provider">The REST API Provider</h1>
<p>We have already seen in the <a href="../services/readme.html">services chapter</a> that the <a href="https://github.com/feathersjs/feathers-rest" target="_blank">feathers-rest</a> module allows to expose services through a <a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank">RESTful</a> interface on the services path. This means that you can call a service method through the <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code> and <code>DELETE</code> <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="_blank">HTTP methods</a>:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> messageService = {
  <span class="hljs-comment">// GET /todos</span>
  find(params [, callback]) {},
  <span class="hljs-comment">// GET /todos/&lt;id&gt;</span>
  get(id, params [, callback]) {},
  <span class="hljs-comment">// POST /todos</span>
  create(data, params [, callback]) {},
  <span class="hljs-comment">// PUT /todos[/&lt;id&gt;]</span>
  update(id, data, params [, callback]) {},
  <span class="hljs-comment">// PATCH /todos[/&lt;id&gt;]</span>
  patch(id, data, params [, callback]) {},
  <span class="hljs-comment">// DELETE /todos[/&lt;id&gt;]</span>
  remove(id, params [, callback]) {},
  setup(app, path) {}
}

app.service(<span class="hljs-string">&apos;/messages&apos;</span>, messageService);
</code></pre>
<p>A full overview of which HTTP method call belongs to which service method call and parameters can be found in the <a href="../clients/rest.html">REST client use</a> chapter. This chapter will talk about how to use and configure the provider module on the server.</p>
<h2 id="usage">Usage</h2>
<p>Install the provider with:</p>
<pre><code>$ npm install feathers-rest body-parser
</code></pre><p>We will have to provide our own body parser middleware (here the standard <a href="https://github.com/expressjs/body-parser" target="_blank">Express 4 body-parser</a>) to make REST <code>.create</code>, <code>.update</code> and <code>.patch</code> calls parse the data in the HTTP body.</p>
<blockquote>
<p><strong>Note:</strong> The body-parser middleware has to be registered <em>before</em> any service. Otherwise the service method will throw a <code>No data provided</code> or <code>First parameter for &apos;create&apos; must be an object</code> error.</p>
</blockquote>
<p>If you would like to add other middleware <em>before</em> the REST handler, simply call <code>app.use(middleware)</code> before registering any services. The following example creates a messages service that can save a new message and return all messages:</p>
<pre><code class="lang-js"><span class="hljs-comment">// app.js</span>
<span class="hljs-pi">&apos;use strict&apos;</span>;

<span class="hljs-keyword">const</span> feathers = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;feathers&apos;</span>);
<span class="hljs-keyword">const</span> rest = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;feathers-rest&apos;</span>);
<span class="hljs-keyword">const</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;body-parser&apos;</span>);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessageService</span> </span>{
  constructor() {
    <span class="hljs-keyword">this</span>.messages = [];
  }

  find(params) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-keyword">this</span>.messages);
  }

  create(data, params) {
    <span class="hljs-keyword">this</span>.messages.push(data);

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(data);
  }
}

<span class="hljs-keyword">const</span> app = feathers()
  <span class="hljs-comment">// Enable the REST provider</span>
  .configure(rest())
  <span class="hljs-comment">// Turn on JSON parser for REST services</span>
  .use(bodyParser.json())
  <span class="hljs-comment">// Turn on URL-encoded parser for REST services</span>
  .use(bodyParser.urlencoded({ extended: <span class="hljs-literal">true</span> }));

app.use(<span class="hljs-string">&apos;/messages&apos;</span>, <span class="hljs-keyword">new</span> MessageService());

<span class="hljs-comment">// Log newly created messages on the server</span>
app.service(<span class="hljs-string">&apos;messages&apos;</span>).on(<span class="hljs-string">&apos;created&apos;</span>, message =&gt; 
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Created message&apos;</span>, message)
);

app.listen(<span class="hljs-number">3030</span>);
</code></pre>
<p>After starting the application with <code>node app.js</code>, we can now use CURL to create a new message:</p>
<pre><code>curl &apos;http://localhost:3030/messages/&apos; -H &apos;Content-Type: application/json&apos; --data-binary &apos;{ &quot;text&quot;: &quot;Learning Feathers!&quot; }&apos;
</code></pre><p>And should see the created message logged on the console. When going to <a href="http://localhost:3030/messages/" target="_blank">localhost:3030/messages/</a> we see the newly created message.</p>
<h2 id="query-route-and-middleware-parameters">Query, route and middleware parameters</h2>
<p>URL query parameters will be parsed and passed to the service as <code>params.query</code>. For example</p>
<pre><code>GET /todos?complete=true&amp;user[]=David&amp;user[]=Eric&amp;sort[name]=1
</code></pre><p>Will set <code>params.query</code> to</p>
<pre><code class="lang-js">{
  <span class="hljs-string">&quot;complete&quot;</span>: <span class="hljs-string">&quot;true&quot;</span>,
  <span class="hljs-string">&quot;user&quot;</span>: [ <span class="hljs-string">&quot;David&quot;</span>, <span class="hljs-string">&quot;Eric&quot;</span> ],
  <span class="hljs-string">&quot;sort&quot;</span>: { <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;1&quot;</span> }
}
</code></pre>
<p>Since the URL is just a string, there will be <em>no type conversion</em>. This can be done manually in a <a href="../hooks/readme.html">hook</a>.</p>
<p>For REST calls, <code>params.provider</code> will be set to <code>rest</code> (so you know where the service call came from). It is also possible to add information directly to the service <code>params</code> by registering Express middleware before a service that modifies the <code>req.feathers</code> property and to use URL parameters for REST API calls which will also be added to the params object:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> feathers = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;feathers&apos;</span>);
<span class="hljs-keyword">const</span> rest = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;feathers-rest&apos;</span>);

<span class="hljs-keyword">const</span> app = feathers();

app.configure(rest())
  .use(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next</span>) </span>{
    req.feathers.fromMiddleware = <span class="hljs-string">&apos;Hello world&apos;</span>;
    next();
  });

app.use(<span class="hljs-string">&apos;/users/:userId/todos&apos;</span>, {
  get(id, params) {
    <span class="hljs-built_in">console</span>.log(params.query); <span class="hljs-comment">// -&gt; ?query</span>
    <span class="hljs-built_in">console</span>.log(params.provider); <span class="hljs-comment">// -&gt; &apos;rest&apos;</span>
    <span class="hljs-built_in">console</span>.log(params.fromMiddleware); <span class="hljs-comment">// -&gt; &apos;Hello world&apos;</span>
    <span class="hljs-built_in">console</span>.log(params.userId); <span class="hljs-comment">// will be `1` for GET /users/1/todos</span>

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve({
      id, params,
      description: <span class="hljs-string">`You have to do <span class="hljs-subst">${id}</span>!`</span>
    });
  }
});

app.listen(<span class="hljs-number">3030</span>);
</code></pre>
<p>You can see all the passed parameters by going to something like <a href="http://localhost:3030/users/213/todos/23?complete=true&amp;user\[\]=David&amp;user\[\]=Eric&amp;sort\[name\]=1" target="_blank">localhost:3030/users/213/todos/23?complete=true&amp;user[]=David&amp;user[]=Eric&amp;sort[name]=1</a>. More information on how services play with Express middleware, routing and versioning can be found in the <a href="../middleware/readme.html">middleware chapter</a>.</p>
<h2 id="formatting-the-response">Formatting the response</h2>
<p>The default REST handler is a middleware that formats the data retrieved by the service as JSON. If you would like to configure your own <code>handler</code> middleware just pass it to <code>rest(handler)</code>. This middleware will have access to <code>res.data</code> which is the data returned by the service. <a href="http://expressjs.com/en/4x/api.html#res.format" target="_blank">res.format</a> can be used for content negotiation. For example, a middleware that just renders plain text with the todo description:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> feathers = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;feathers&apos;</span>);
<span class="hljs-keyword">const</span> rest = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;feathers-rest&apos;</span>);

<span class="hljs-keyword">const</span> app = feathers();

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">restFormatter</span>(<span class="hljs-params">req, res</span>) </span>{
  res.format({
    <span class="hljs-string">&apos;text/plain&apos;</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      res.end(<span class="hljs-string">`The todo is: <span class="hljs-subst">${res.data.description}</span>`</span>);
    }
  });
}

app.configure(rest(restFormatter))
  .use(<span class="hljs-string">&apos;/todos&apos;</span>, {
    get(id, params) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve({
        description: <span class="hljs-string">`You have to do <span class="hljs-subst">${id}</span>`</span>
      });
    }
  });

app.listen(<span class="hljs-number">3030</span>);
</code></pre>
<p>Now going to <a href="http://localhost:3030/todos/laundry" target="_blank">localhost:3030/todos/laundry</a> will print the plain text <code>The todo is: You have to do laundry</code>.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../services/readme.html" class="navigation navigation-prev " aria-label="Previous page: Services"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../real-time/readme.html" class="navigation navigation-next " aria-label="Next page: Real-Time"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-collapsible-menu/plugin.js"></script>
    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.2.1/anchor.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-heading-anchors/anchor-style.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"edit-link":{"base":"https://github.com/feathersjs/feathers-docs/edit/master","label":"Edit This Page"},"collapsible-menu":{},"heading-anchors":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"livereload":{}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
